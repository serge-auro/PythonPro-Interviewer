# Техническая документация для бэкенд-сервиса

## Общая информация

Данный документ описывает основные функции, используемые в бэкенд-сервисе, включая описание их работы, параметры, которые они принимают, и значения, которые они возвращают.

## Функции

### `init_user(user_id: int) -> int`

Инициализация пользователя в системе.

#### Параметры:
- `user_id` (int): Идентификатор пользователя.

#### Возвращает:
- `int`: Идентификатор пользователя, который был инициализирован.

---

### `get_report(user_id: int) -> str`

Запрос статистики пользователя.

#### Параметры:
- `user_id` (int): Идентификатор пользователя.

#### Возвращает:
- `str`: Строковое представление статистики пользователя.

---

### `get_question(user_id: int) -> dict or str`

Получение случайного вопроса для пользователя.

#### Параметры:
- `user_id` (int): Идентификатор пользователя.

#### Возвращает:
- `dict`: Словарь с ID и текстом вопроса, если вопрос доступен.
- `str`: Сообщение о том, что все вопросы отвечены или нет активных вопросов, если вопросов нет.

---

### `get_answer(question: str, data: Any, type: TYPE) -> tuple`

Получение ответа на вопрос через ChatGPT или другими средствами.

#### Параметры:
- `question` (str): Вопрос, на который требуется ответ.
- `data` (Any): Дополнительные данные, необходимые для формирования ответа.
- `type` (TYPE): Тип запроса (текст, аудио, пустой).

#### Возвращает:
- `tuple`: Результат и комментарий к ответу.

---

### `ask_chatgpt(question_pack: tuple) -> dict`

Запрос к модели OpenAI для получения ответов.

#### Параметры:
- `question_pack` (tuple): Пакет вопрос-ответ для модели.

#### Возвращает:
- `dict`: Словарь с результатом и комментарием.

---

### `download_audio_file(file_id: str, bot_token: str = BOT_TOKEN) -> BytesIO or None`

Скачивание аудиофайла по идентификатору.

#### Параметры:
- `file_id` (str): Идентификатор файла.
- `bot_token` (str, optional): Токен бота для доступа к файлам.

#### Возвращает:
- `BytesIO`: Поток данных файла, если загрузка успешна.
- `None`: Если загрузка не удалась.

---

### `audio_to_numpy(audio_data: BytesIO) -> np.ndarray or None`

Преобразование аудио данных в массив NumPy.

#### Параметры:
- `audio_data` (BytesIO): Данные аудиофайла.

#### Возвращает:
- `np.ndarray`: Массив данных NumPy, если преобразование успешно.
- `None`: Если преобразование не удалось.

---

### `audio_to_text(file_id: str) -> str or None`

Преобразование аудио в текст.

#### Параметры:
- `file_id` (str): Идентификатор аудиофайла.

#### Возвращает:
- `str`: Текст, извлеченный из аудио.
- `None`: Если преобразование не удалось.

---

### `set_timer(user_id: int, question_id: int) -> None`

Установка таймера для пользователя.

#### Параметры:
- `user_id` (int): Идентификатор пользователя.
- `question_id` (int): Идентификатор вопроса.

#### Возвращает:
- `None`

---

### `skip_timer(user_id: int) -> None`

Пропуск таймера для пользователя.

#### Параметры:
- `user_id` (int): Идентификатор пользователя.

#### Возвращает:
- `None`